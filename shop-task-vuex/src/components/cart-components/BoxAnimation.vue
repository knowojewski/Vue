<template>
    <div class="animation-box">
        <div class="animation" v-if="animation" @click="setToTrue">
            <svg class="smoke smoke-small" width="195" height="165" viewBox="0 0 195 165" fill="none" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="66.811" cy="42.6317" rx="29.2159" ry="22.0304" transform="rotate(19.46 66.811 42.6317)" fill="#C4C4C4"/>
                <ellipse cx="62.7946" cy="36.5684" rx="35.0229" ry="26.4092" transform="rotate(19.46 62.7946 36.5684)" fill="#E7E7E7"/>
                <ellipse cx="74.2037" cy="69.5435" rx="29.2159" ry="22.0304" transform="rotate(19.46 74.2037 69.5435)" fill="#E7E7E7"/>
                <ellipse cx="105.094" cy="62.4336" rx="23.7065" ry="17.8761" transform="rotate(19.46 105.094 62.4336)" fill="#E7E7E7"/>
                <ellipse cx="98.5212" cy="88.4164" rx="29.2159" ry="31.7238" transform="rotate(19.46 98.5212 88.4164)" fill="#E7E7E7"/>
                <ellipse cx="120.672" cy="122.14" rx="26.311" ry="17.8807" transform="rotate(19.46 120.672 122.14)" fill="#E7E7E7"/>
                <ellipse cx="134.82" cy="134.488" rx="29.2159" ry="8.61147" transform="rotate(46.719 134.82 134.488)" fill="#E7E7E7"/>
            </svg>

            <svg class="smoke smoke-large" width="278" height="244" viewBox="0 0 278 244" fill="none" xmlns="http://www.w3.org/2000/svg">
                <ellipse cx="53.8376" cy="109.231" rx="43.9527" ry="33.1429" transform="rotate(-24.9806 53.8376 109.231)" fill="#C4C4C4"/>
                <ellipse cx="53.8376" cy="109.231" rx="43.9527" ry="33.1429" transform="rotate(-24.9806 53.8376 109.231)" fill="#E7E7E7"/>
                <ellipse cx="90.1255" cy="130.35" rx="43.9527" ry="33.1429" transform="rotate(-24.9806 90.1255 130.35)" fill="#E7E7E7"/>
                <ellipse cx="105.664" cy="88.0101" rx="43.9527" ry="33.1429" transform="rotate(-24.9806 105.664 88.0101)" fill="#E7E7E7"/>
                <ellipse cx="136.125" cy="125.007" rx="43.9527" ry="47.7257" transform="rotate(-24.9806 136.125 125.007)" fill="#E7E7E7"/>
                <ellipse cx="192.762" cy="142.496" rx="43.9527" ry="23.8629" transform="rotate(-24.9806 192.762 142.496)" fill="#E7E7E7"/>
                <ellipse cx="223.643" cy="136.258" rx="43.9527" ry="12.9552" transform="rotate(2.27837 223.643 136.258)" fill="#E7E7E7"/>
            </svg>
                
            <div class="box-with-cap">
                <svg class="box-cap" width="258" height="149" viewBox="0 0 258 149" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M257.573 68.4216L129.943 0L1.42983 68.4216H1L1.21599 68.5354L1 68.6504H1.43417L129.943 136.385L257.569 68.6504H258L257.785 68.5354L258 68.4216H257.573Z" fill="#9A9A9A"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M257.573 68.4216L129.943 0L1.42983 68.4216H1L1.21599 68.5354L1 68.6504H1.43417L129.943 136.385L257.569 68.6504H258L257.785 68.5354L258 68.4216H257.573Z" fill="#9A9A9A"/>
                    <path d="M128.734 135.464V147.905L257.489 81.0941V69.1143L128.734 135.464Z" fill="#E1E1E1" stroke="white"/>
                    <path d="M128.734 135.464V147.905L0.999977 81.0941V69.1143L128.734 135.464Z" fill="#C4C4C4" stroke="white"/>
                </svg>
                    
                <svg class="box-main" width="253" height="269" viewBox="0 0 253 269" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M252.082 75.2483L127.184 1L1.42061 75.2483H1L1.21136 75.3719L1 75.4966H1.42486L127.184 149L252.078 75.4966H252.5L252.29 75.3719L252.5 75.2483H252.082Z" fill="#9A9A9A"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M252.082 75.2483L127.184 1L1.42061 75.2483H1L1.21136 75.3719L1 75.4966H1.42486L127.184 149L252.078 75.4966H252.5L252.29 75.3719L252.5 75.2483H252.082Z" fill="#9A9A9A"/>
                    <image class="product-top" href="../../assets/box-animation/ProductTop.svg"/>
                    <image class="product-right" href="../../assets/box-animation/ProductRight.svg"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M208.661 106.573L182.466 91L156.088 106.573H156L156.044 106.599L156 106.625H156.089L182.466 122.041L208.661 106.625H208.749L208.705 106.599L208.749 106.573H208.661Z" fill="#C4C4C4"/>
                    <path d="M182.217 121.831V147L208.644 131.584V106.73L182.217 121.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M182.217 121.831V147L156 131.584V106.73L182.217 121.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M156 106.625L182.427 91L208.644 106.625V131.689L182.427 147L156 131.689V106.625Z" stroke="white"/>
                    <image class="product-left" href="../../assets/box-animation/ProductLeft.svg"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M146.661 106.573L120.466 91L94.0882 106.573H94L94.0443 106.599L94 106.625H94.0891L120.466 122.041L146.661 106.625H146.749L146.705 106.599L146.749 106.573H146.661Z" fill="#C4C4C4"/>
                    <path d="M120.217 121.831V147L146.644 131.584V106.73L120.217 121.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M120.217 121.831V147L94 131.584V106.73L120.217 121.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M94 106.625L120.427 91L146.644 106.625V131.689L120.427 147L94 131.689V106.625Z" stroke="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M176.661 122.573L150.466 107L124.088 122.573H124L124.044 122.599L124 122.625H124.089L150.466 138.041L176.661 122.625H176.749L176.705 122.599L176.749 122.573H176.661Z" fill="#C4C4C4"/>
                    <path d="M150.217 137.831V163L176.644 147.584V122.73L150.217 137.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M150.217 137.831V163L124 147.584V122.73L150.217 137.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M124 122.625L150.427 107L176.644 122.625V147.689L150.427 163L124 147.689V122.625Z" stroke="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M84.6614 110.573L58.4656 95L32.0882 110.573H32L32.0443 110.599L32 110.625H32.0891L58.4656 126.041L84.6606 110.625H84.7491L84.705 110.599L84.7491 110.573H84.6614Z" fill="#C4C4C4"/>
                    <path d="M58.2172 125.831V151L84.6442 135.584V110.73L58.2172 125.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M58.2172 125.831V151L32 135.584V110.73L58.2172 125.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M32 110.625L58.427 95L84.6442 110.625V135.689L58.427 151L32 135.689V110.625Z" stroke="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M115.661 126.573L89.4656 111L63.0882 126.573H63L63.0443 126.599L63 126.625H63.0891L89.4656 142.041L115.661 126.625H115.749L115.705 126.599L115.749 126.573H115.661Z" fill="#C4C4C4"/>
                    <path d="M89.2172 141.831V167L115.644 151.584V126.73L89.2172 141.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M89.2172 141.831V167L63 151.584V126.73L89.2172 141.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M63 126.625L89.427 111L115.644 126.625V151.689L89.427 167L63 151.689V126.625Z" stroke="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M146.661 142.573L120.466 127L94.0882 142.573H94L94.0443 142.599L94 142.625H94.0891L120.466 158.041L146.661 142.625H146.749L146.705 142.599L146.749 142.573H146.661Z" fill="#C4C4C4"/>
                    <path d="M120.217 157.831V183L146.644 167.584V142.73L120.217 157.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M120.217 157.831V183L94 167.584V142.73L120.217 157.831Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M94 142.625L120.427 127L146.644 142.625V167.689L120.427 183L94 167.689V142.625Z" stroke="white"/>
                    <path d="M126 148V268L252 194.5V76L126 148Z" fill="#E1E1E1" stroke="white"/>
                    <path d="M126 148V268L1 194.5V76L126 148Z" fill="#C4C4C4" stroke="white"/>
                    <path d="M1 75.5L127 1L252 75.5V195L127 268L1 195V75.5Z" stroke="white"/>
                </svg>
            </div>  
        </div>
    </div>
</template>

<script>
import {Vue, Component} from 'vue-property-decorator';

@Component
export default class BoxAnimation extends Vue {
    animation = true;

    setToFalse() {
        this.animation = false;
    }

    async setToTrue() {
        await this.setToFalse();
        this.animation = true;
    }

    resetAnimation() {
        this.setToTrue()
     }
}
</script>

<style lang="scss" scoped>
.animation-box {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    width: 100%;
    background: #fff;
    overflow: hidden;
}

.animation {
    position: relative;
    cursor: pointer;

    .smoke {
        opacity: 0;
        position: absolute;
        z-index: 1;
    }

    .smoke-small {
        transform: translate(-100px, 140px) scale(.7);
        animation: smoke-small-anim .8s ease forwards 2.65s;
    }
    
    .smoke-large {
        transform: translate(-200px, 150px) scale(.7);
        animation: smoke-large-anim .8s ease forwards 2.65s;
    }

    .box-with-cap {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        animation: box-anim 2s ease forwards 1.6s;

        .box-cap {
            opacity: 0;
            transform: translateY(0px);
            animation: cap-anim .5s ease-out forwards .8s;
        }
    
        .box-main { overflow: visible; }
    
        .product-top {
            transform: translate(-95px, 130px);
            animation: top-product-anim .8s ease forwards .2s;
        }
    
        .product-left {
            transform: translate(-65px, 150px);
            animation: left-product-anim .8s ease forwards;
        }
        
        .product-right {
            transform: translate(-125px, 150px);
            animation: right-product-anim .8s ease forwards .1s;
        }
    }
}

@keyframes left-product-anim {
    0% {
        transform: translate(-65px, 150px);
    }

    70% {
        transform: translate(-40px,-30px);
    }

    100% {
        transform: translate(65px, 72px);
    }
}

@keyframes top-product-anim {
    0% {
        transform: translate(-95px, 130px);
    }

    70% {
        transform: translate(-45px,-35px);
    }

    100% {
        transform: translate(95px, 52px);
    }
}

@keyframes right-product-anim {
    0% {
        transform: translate(-125px, 150px);
    }

    70% {
        transform: translate(-40px,-30px);
    }

    100% {
        transform: translate(125px, 72px);
    }
}

@keyframes cap-anim {
    0% {
        transform: translateY(0);
    }

    40% {
        opacity: 1;
    }

    100% {
        opacity: 1;
        transform: translateY(150px);
    }
}

@keyframes box-anim {
    0% {
        transform: translate(0, 0) rotateZ(0);
    }

    50% {
        transform: translate(-50px, -50px) rotateZ(20deg);
    }
    
    98% {
        transform: translate(1200px, -50px) rotateZ(-80deg);
    }

    100% {
        transform: translate(0, -100px) rotateZ(0);
    }
}

@keyframes smoke-small-anim {
    0% {
        transform: translate(-100px, 140px) scale(.7);
    }

    80% {
        opacity: 1;
        transform: translate(-160px, 50px) scale(1);
    }

    100% {
        opacity: 0;
        transform: translate(-160px, 50px) scale(1);
    }
}

@keyframes smoke-large-anim {
    0% {
        transform: translate(-200px, 150px) scale(.7);
    }

    80% {
        opacity: 1;
        transform: translate(-240px, 140px) scale(1);
    }

    100% {
        opacity: 0;
        transform: translate(-240px, 140px) scale(1);
    }
}


</style>